# Проект "Анализ банковских операций"

## Описание:

Курсовой проект созданный для обучения языку python

## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/ZloyKINDER/TransactionApp.git
```

## Реализованный функционал:

1. Веб страницы/Главная странциа - Возвращает json ответ для главной страницы. Содержит приветсвие, Информацию по картам, Топ 5 транзакций по сумме платежа, курс валют, кешбек.

2. Сервиси/Простой поиск - Возвращает JSON-ответ со всеми транзакциями, содержащими запрос в описании или категории.

3. Отчеты/Траты по категориям - Возвращает траты по заданной категории за последние три месяца (от переданной даты)..


## Примеры использования:

1. main_page
```
# Пример
print(main_page("2021-10-30 15:12:30"))
# JSON Ответ

{
  "greeting": "Добрый день",
  "cards": [
    {
      "last_digits": "5814",
      "total_spent": 1262.00,
      "cashback": 12.62
    },
    {
      "last_digits": "7512",
      "total_spent": 7.94,
      "cashback": 0.08
    }
  ],
  "top_transactions": [
    {
      "date": "21.12.2021",
      "amount": 1198.23,
      "category": "Переводы",
      "description": "Перевод Кредитная карта. ТП 10.2 RUR"
    },
    {
      "date": "20.12.2021",
      "amount": 829.00,
      "category": "Супермаркеты",
      "description": "Лента"
    },
    {
      "date": "20.12.2021",
      "amount": 421.00,
      "category": "Различные товары",
      "description": "Ozon.ru"
    },
    {
      "date": "16.12.2021",
      "amount": -14216.42,
      "category": "ЖКХ",
      "description": "ЖКУ Квартира"
    },
    {
      "date": "16.12.2021",
      "amount": 453.00,
      "category": "Бонусы",
      "description": "Кешбэк за обычные покупки"
    }
  ],
  "currency_rates": [
    {
      "currency": "USD",
      "rate": 73.21
    },
    {
      "currency": "EUR",
      "rate": 87.08
    }
  ],
  "stock_prices": [
    {
      "stock": "AAPL",
      "price": 150.12
    },
    {
      "stock": "AMZN",
      "price": 3173.18
    },
    {
      "stock": "GOOGL",
      "price": 2742.39
    },
    {
      "stock": "MSFT",
      "price": 296.71
    },
    {
      "stock": "TSLA",
      "price": 1007.08
    }
  ]
}
```

2. simple_search
```
# Пример
print(simple_search("продукты", "../data/operations.xlsx"))
# JSON Ответ
[
  {
    "Дата операции": "30.10.2020 14:34:40",
    "Дата платежа": "01.11.2020",
    "Номер карты": "*7197",
    "Статус": "OK",
    "Сумма операции": -292.59,
    "Валюта операции": "RUB",
    "Сумма платежа": -292.59,
    "Валюта платежа": "RUB",
    "Кэшбэк": NaN,
    "Категория": "Супермаркеты",
    "MCC": 5411.0,
    "Описание": "Продукты Ермолино",
    "Бонусы (включая кэшбэк)": 5,
    "Округление на инвесткопилку": 0,
    "Сумма операции с округлением": 292.59
  },
  {
    "Дата операции": "09.09.2020 14:32:29",
    "Дата платежа": "11.09.2020",
    "Номер карты": "*7197",
    "Статус": "OK",
    "Сумма операции": -372.78,
    "Валюта операции": "RUB",
    "Сумма платежа": -372.78,
    "Валюта платежа": "RUB",
    "Кэшбэк": NaN,
    "Категория": "Супермаркеты",
    "MCC": 5411.0,
    "Описание": "Продукты Ермолино",
    "Бонусы (включая кэшбэк)": 7,
    "Округление на инвесткопилку": 0,
    "Сумма операции с округлением": 372.78
  },
]
```

3. spending_by_category
```
# Пример
df = pd.DataFrame(read_transactions_xlsx("../data/operations.xlsx"))
print(spending_by_category(df, "Супермаркеты", "2021-10-30 15:12:30"))
# JSON Ответ
[
  {
    "Дата операции":"29.10.2021 11:00:41",
    "Дата платежа":"29.10.2021",
    "Номер карты":"*7197",
    "Статус":"OK",
    "Сумма операции":-188.0,
    "Валюта операции":"RUB",
    "Сумма платежа":-188.0,
    "Валюта платежа":"RUB",
    "Кэшбэк":null,
    "Категория":"Супермаркеты",
    "MCC":5411.0,
    "Описание":"Колхоз",
    "Бонусы (включая кэшбэк)":3,
    "Округление на инвесткопилку":0,
    "Сумма операции с округлением":188.0
  },
  {
    "Дата операции":"28.10.2021 22:10:33",
    "Дата платежа":"29.10.2021",
    "Номер карты":"*7197",
    "Статус":"OK",
    "Сумма операции":-86.98,
    "Валюта операции":"RUB",
    "Сумма платежа":-86.98,
    "Валюта платежа":"RUB",
    "Кэшбэк":null,
    "Категория":"Супермаркеты",
    "MCC":5411.0,
    "Описание":"Магнит",
    "Бонусы (включая кэшбэк)":1,
    "Округление на инвесткопилку":0,
    "Сумма операции с округлением":86.98
  },
]
```
## Реализованны модули с тестированием:

1. test_utils - Тестирование для модуля utils.

2. test_views - Тестирование для модуля views.

3. test_services- Тестировани для модуля services.

4. test_reports- Тестировани для модуля reports.
